/* =========================
   base-dedup.css (FINAL, Contrast Fixed)
   ========================= */
:root{
  --bg:#f6f8fb;
  --surface:#ffffff;
  --ink:#0f172a;
  --muted:#334155; /* 比 #475569 更深，提高浅底可读性 */
  --brand:#2563eb;
  --accent:#22c55e;
  --ring:#94a3b8;
  --link:#1d4ed8; /* 深一点的蓝，AA 对比度 */
  --card:#ffffff;
  --shadow: 0 6px 18px #0f172a0f;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220;
    --surface:#0f172a;
    --ink:#e6ecf4;
    --muted:#cbd5e1;
    --brand:#60a5fa;
    --accent:#34d399;
    --ring:#334155;
    --link:#7cb2ff;
    --card:#111827;
    --shadow: 0 6px 18px #00000026;
  }
}

html, body { height: 100%; }
body{
  margin:0;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,'Noto Sans',sans-serif;
  color:var(--ink); background:var(--bg); line-height:1.6;
}

/* Anchors — consolidated in one place */
a{ color:var(--link); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* A11y */
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
:focus-visible{outline:3px solid var(--brand);outline-offset:2px}
.skip-link{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{position:static;width:auto;height:auto;padding:.5rem .75rem;background:var(--brand);color:#fff;border-radius:.5rem}

/* Header + nav */
.site-header{
  position:sticky;top:0;background:#e9eff8;border-bottom:1px solid #cbd5e1;z-index:10;
  display:grid;grid-template-columns:auto auto;align-items:center;gap:.75rem;padding:.85rem 1rem;
}
@media (prefers-color-scheme: dark){.site-header{background:#0b1220;border-bottom-color:#1f2937}}
.brand{display:flex;align-items:center;gap:.75rem}
.logo{
  display:grid;place-items:center;width:48px;height:48px;border-radius:12px;
  background:var(--brand);color:#fff;font-weight:700;box-shadow:var(--shadow);
}
.brand-text h1{font-size:1.12rem;margin:.1rem 0}
.brand-text .tagline{margin:0;color:var(--muted);font-size:.9rem}

.nav-toggle{
  justify-self:end;display:inline-grid;gap:4px;align-items:center;
  background:transparent;border:1px solid var(--ring);border-radius:.75rem;
  padding:.45rem .6rem;cursor:pointer
}
.nav-toggle .bar{width:18px;height:2px;background:var(--ink);display:block}

.site-nav{grid-column:1/-1}
.site-nav ul{list-style:none;margin:0;padding:0;display:flex;gap:.5rem;flex-wrap:wrap}
.site-nav a{display:block;padding:.5rem .75rem;border-radius:.6rem;color:var(--ink)}

/* 当前页高亮，hover时保持蓝底白字 */
.site-nav a[aria-current="page"],
.site-nav a[aria-current="page"]:hover,
.site-nav a[aria-current="page"]:focus-visible{
  background:#1d4ed8;
  color:#fff;
  border-radius:.6rem;
  outline:none;
}
/* 非当前页 hover */
.site-nav a:not([aria-current="page"]):hover{
  background:var(--surface);
  outline:1px solid #dbe3ef;
}

/* Main + controls */
.main{max-width:1100px;margin-inline:auto;padding:1rem}
.controls{display:flex;flex-wrap:wrap;align-items:center;gap:.75rem;justify-content:space-between;margin-bottom:1rem}
.view-toggle{display:flex;border:1px solid #d1d8e5;border-radius:.75rem;overflow:hidden;box-shadow:var(--shadow)}
.toggle{background:#f4f6fb;border:0;padding:.5rem .9rem;cursor:pointer}
/* 活动态采用深蓝底白字，保证对比度 */
.toggle.active{background:#1d4ed8;color:#fff}

.filters select{
  padding:.45rem .65rem;border-radius:.6rem;border:1px solid #cbd5e1;background:#fff;min-width:10ch
}

/* Directory */
.directory{display:grid;gap:1rem}
.directory.grid{grid-template-columns:repeat(auto-fill,minmax(270px,1fr))}
.directory.list{grid-template-columns:1fr}
.card{
  background:var(--card);border:1px solid #e2e8f0;border-radius:1rem;padding:1rem;
  display:grid;grid-template-columns:72px 1fr;gap:.9rem;align-items:center;
  transition:transform .12s ease, box-shadow .12s ease;box-shadow:var(--shadow);
}
.card:hover{transform:translateY(-2px)}
.card img.logo{width:64px;height:64px;border-radius:.75rem;object-fit:cover;border:1px solid #e2e8f0}
.card h3{margin:.1rem 0 .2rem;font-size:1.05rem}
.card p{margin:.15rem 0;color:var(--muted);font-size:.95rem}

/* Badges：统一深文字以保证浅底对比 */
.badge{justify-self:start;padding:.25rem .5rem;border-radius:.5rem;font-size:.75rem;font-weight:600;color:var(--ink)}
.badge.gold{background:#fef9c3;border:1px solid #fde68a}
.badge.silver{background:#f1f5f9;border:1px solid #e2e8f0}
.badge.member{background:#ecfeff;border:1px solid #a5f3fc}

/* List layout */
.directory.list .card{grid-template-columns:48px 2fr 2fr 1fr;gap:1rem}

/* Footer */
.site-footer{
  margin-top:2rem;
  border-top:1px solid #e2e8f0;
  background:#f8fafc;
  display:grid;gap:.25rem;padding:1rem;
  color:var(--muted);
}
.site-footer a{color:var(--link);}

/* --------- Mobile nav (hidden 属性控制显隐) --------- */
/* normalize 已有 [hidden]{display:none!important} 控制显隐 */
@media (max-width:720px){
  .site-header{ position:relative; }
  #site-nav{
    position:absolute; top:64px; left:0; right:0;
    background:#fff; border-top:1px solid #e2e8f0;
    box-shadow:0 12px 24px rgba(0,0,0,.08);
  }
  #site-nav ul{
    display:flex; flex-direction:column; gap:.5rem;
    padding:.75rem 1rem; margin:0;
  }
}
/* 桌面端：菜单常显 */
@media (min-width:721px){
  #site-nav{ position:static; box-shadow:none; }
}

/* -------- Dark mode contrast fixes -------- */
@media (prefers-color-scheme: dark){
  .logo{ color:#0b1220; } /* 与 #60a5fa 对比 7:1 */
  .brand-text .tagline{ color:#cbd5e1; }
  .view-toggle{ border-color:#334155; }
  .toggle{ background:#111827; color:#e6ecf4; }
  .toggle.active{ background:#1d4ed8; color:#fff; }
  .site-footer{ background:var(--surface); border-top-color:#1f2937; }
  .site-footer, .site-footer a{ color:#e6ecf4; }
  .site-footer a:hover{ text-decoration:underline; }
  @media (max-width:720px){
    #site-nav{
      background:var(--surface);
      border-top-color:#1f2937;
      box-shadow:0 12px 24px rgba(0,0,0,.45);
    }
    #site-nav a{ color:var(--ink); }
    #site-nav a:not([aria-current="page"]):hover{
      background:#111827; outline:1px solid #334155;
    }
  }
}

/* Motion + print */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important;scroll-behavior:auto!important}
}
@media print{
  .site-header,.controls,.site-footer{display:none}
  .directory{grid-template-columns:1fr 1fr;gap:.5rem}
  .card{box-shadow:none}
}
