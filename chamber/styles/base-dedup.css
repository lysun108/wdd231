:root{
  --bg:#f6f8fb;
  --surface:#ffffff;
  --ink:#0f172a;
  --muted:#475569;
  --brand:#2563eb;
  --accent:#22c55e;
  --ring:#94a3b8;
  --link:#0b63d8;
  --card:#ffffff;
  --shadow: 0 6px 18px #0f172a0f;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220; --surface:#0f172a; --ink:#e6ecf4; --muted:#94a3b8;
    --brand:#60a5fa; --accent:#34d399; --ring:#334155; --link:#7cb2ff; --card:#111827;
    --shadow: 0 6px 18px #00000026;
  }
}
html, body { height: 100%; }
body{
  margin:0;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,'Noto Sans',sans-serif;
  color:var(--ink); background:var(--bg); line-height:1.6;
}

/* Anchors — consolidated in one place */
a{ color:var(--link); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* A11y */
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
:focus-visible{outline:3px solid var(--brand);outline-offset:2px}
.skip-link{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{position:static;width:auto;height:auto;padding:.5rem .75rem;background:var(--brand);color:#fff;border-radius:.5rem}

/* Header + nav */
.site-header{
  position:sticky;top:0;background:#e9eff8;border-bottom:1px solid #cbd5e1;z-index:10;
  display:grid;grid-template-columns:auto auto;align-items:center;gap:.75rem;padding:.85rem 1rem;
}
@media (prefers-color-scheme: dark){.site-header{background:#0b1220;border-bottom-color:#1f2937}}
.brand{display:flex;align-items:center;gap:.75rem}
.logo{display:grid;place-items:center;width:48px;height:48px;border-radius:12px;background:var(--brand);color:#fff;font-weight:700;box-shadow:var(--shadow)}
.brand-text h1{font-size:1.12rem;margin:.1rem 0}
.brand-text .tagline{margin:0;color:var(--muted);font-size:.9rem}
.nav-toggle{justify-self:end;display:inline-grid;gap:4px;align-items:center;background:transparent;border:1px solid var(--ring);border-radius:.75rem;padding:.45rem .6rem;cursor:pointer}
.nav-toggle .bar{width:18px;height:2px;background:var(--ink);display:block}
.site-nav{grid-column:1/-1}
.site-nav ul{list-style:none;margin:0;padding:0;display:flex;gap:.5rem;flex-wrap:wrap}
.site-nav a{display:block;padding:.5rem .75rem;border-radius:.6rem;color:var(--ink)}
.site-nav a[aria-current="page"], .site-nav a:hover{background:var(--surface);outline:1px solid #dbe3ef}

/* Main + controls */
.main{max-width:1100px;margin-inline:auto;padding:1rem}
.controls{display:flex;flex-wrap:wrap;align-items:center;gap:.75rem;justify-content:space-between;margin-bottom:1rem}
.view-toggle{display:flex;border:1px solid #d1d8e5;border-radius:.75rem;overflow:hidden;box-shadow:var(--shadow)}
.toggle{background:#f4f6fb;border:0;padding:.5rem .9rem;cursor:pointer}
.toggle.active{background:var(--brand);color:#fff}
.filters select{padding:.45rem .65rem;border-radius:.6rem;border:1px solid #cbd5e1;background:#fff;min-width:10ch}

/* Directory */
.directory{display:grid;gap:1rem}
.directory.grid{grid-template-columns:repeat(auto-fill,minmax(270px,1fr))}
.directory.list{grid-template-columns:1fr}
.card{
  background:var(--card);border:1px solid #e2e8f0;border-radius:1rem;padding:1rem;
  display:grid;grid-template-columns:72px 1fr;gap:.9rem;align-items:center;
  transition:transform .12s ease, box-shadow .12s ease;box-shadow:var(--shadow);
}
.card:hover{transform:translateY(-2px)}
.card img.logo{width:64px;height:64px;border-radius:.75rem;object-fit:cover;border:1px solid #e2e8f0}
.card h3{margin:.1rem 0 .2rem;font-size:1.05rem}
.card p{margin:.15rem 0;color:var(--muted);font-size:.95rem}
.badge{justify-self:start;padding:.25rem .5rem;border-radius:.5rem;font-size:.75rem;font-weight:600}
.badge.gold{background:#fef9c3;border:1px solid #fde68a}
.badge.silver{background:#f1f5f9;border:1px solid #e2e8f0}
.badge.member{background:#ecfeff;border:1px solid #a5f3fc}

/* List layout */
.directory.list .card{grid-template-columns:48px 2fr 2fr 1fr;gap:1rem}

/* Footer */
.site-footer{margin-top:2rem;border-top:1px solid #e2e8f0;background:#f8fafc;display:grid;gap:.25rem;padding:1rem}
.site-footer a{color:var(--link)}

/* Responsive nav */
@media (max-width:720px){.site-nav{display:none}.site-nav.open{display:block}}

/* Motion + print */
@media (prefers-reduced-motion:reduce){*{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important;scroll-behavior:auto!important}}
@media print{.site-header,.controls,.site-footer{display:none}.directory{grid-template-columns:1fr 1fr;gap:.5rem}.card{box-shadow:none}}
/* ---------- AA 对比度修正 ---------- */
:root{
  /* 链接色调深，确保在浅底上 >= 4.5:1 */
  --link:#1d4ed8;     /* 原先 #0b63d8 */
}

/* Grid/List 切换：活动态蓝底白字，但用更深蓝保证 AA */
.toggle.active{
  background:#1d4ed8;   /* 原先 var(--brand)=#2563eb 可能 <4.5:1 */
  color:#fff;
}

/* 当前页导航高亮：Wayfinding 清晰可见且对比足够 */
.site-nav a[aria-current="page"]{
  background:#1d4ed8;   /* 深蓝底 */
  color:#fff;
  border-radius:.6rem;
}

/* 徽章若使用很浅底，也确保文字不变淡（继承 var(--ink) 即可） */
.badge{ color:var(--ink); }

/* ---------- 移动端导航（用 hidden 控制显隐） ---------- */
/* 你已经在 normalize 里写了 [hidden]{display:none!important}，这里只需定义样式 */
@media (max-width:720px){
  .site-header{ position:relative; }
  #site-nav{
    position:absolute; top:64px; left:0; right:0;
    background:#fff; border-top:1px solid #e2e8f0;
    box-shadow:0 12px 24px rgba(0,0,0,.08);
  }
  #site-nav ul{
    display:flex; flex-direction:column; gap:.5rem;
    padding:.75rem 1rem; margin:0;
  }
  /* 不再用 .open 类，完全依赖 hidden 属性 */
  .site-nav, .site-nav.open{ display:block; } /* 允许布局渲染，hidden 决定显示与否 */
}

/* 桌面端：菜单常显，按钮视觉不变 */
@media (min-width:721px){
  #site-nav{ position:static; box-shadow:none; }
}
